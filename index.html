<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KEC Notes Premium - Home</title>
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxwYXRoIGQ9Ik0xMCAxMEgyMlYyMkgxMFYxMFoiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDBfbGluZWFyXzFfMSIgeDE9IjAiIHkxPSIwIiB4Mj0iMzIiIHkyPSIzMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjNEY4Q0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzZBODJGQiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPg==">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        /* Enhanced CSS Variables */
        :root {
            --glass-bg: rgba(15, 23, 42, 0.85);
            --glass-bg-light: rgba(30, 41, 59, 0.75);
            --glass-border: rgba(148, 163, 184, 0.15);
            --glass-border-bright: rgba(79, 140, 255, 0.3);
            --glass-blur: 20px;
            --glass-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --accent: #4f8cff;
            --accent-hover: #6366f1;
            --accent-secondary: #06b6d4;
            --accent-tertiary: #8b5cf6;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
            --bg-gradient: radial-gradient(ellipse at top, #1e293b 0%, #0f172a 100%);
            --sidebar-width: 280px;
            --header-height: 70px;
            --border-radius: 16px;
            --border-radius-sm: 12px;
            --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-gradient) fixed;
            color: var(--text-primary);
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow-x: hidden;
        }

        /* App Shell */
        .app-shell {
            min-height: 100vh;
            position: relative;
        }

        /* Premium Background Effects */
        .bg-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .floating-orb {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--accent), var(--accent-secondary));
            opacity: 0.1;
            animation: float 10s infinite linear;
            filter: blur(1px);
        }

        .floating-orb:nth-child(1) {
            width: 200px;
            height: 200px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-orb:nth-child(2) {
            width: 150px;
            height: 150px;
            top: 70%;
            right: 20%;
            animation-delay: -10s;
        }

        .floating-orb:nth-child(3) {
            width: 100px;
            height: 100px;
            top: 40%;
            left: 80%;
            animation-delay: -5s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(90deg); }
            50% { transform: translateY(-10px) rotate(180deg); }
            75% { transform: translateY(-30px) rotate(270deg); }
        }

        /* Enhanced Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--glass-bg);
            border-right: 1px solid var(--glass-border);
            backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            transition: var(--transition-smooth);
            overflow-y: auto;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--glass-border);
            border-radius: 3px;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .sidebar-logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: 0 4px 20px rgba(79, 140, 255, 0.3);
        }

        .sidebar-title {
            font-weight: 700;
            font-size: 1.25rem;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-section {
            padding: 1rem 1.5rem 0.5rem;
        }

        .nav-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            margin: 0.25rem 0.5rem;
            border-radius: var(--border-radius-sm);
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(79, 140, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover,
        .nav-link.active {
            background: rgba(79, 140, 255, 0.1);
            color: var(--accent);
            transform: translateX(4px);
        }

        .nav-link.active {
            background: linear-gradient(135deg, rgba(79, 140, 255, 0.15), rgba(99, 102, 241, 0.1));
            border-left: 3px solid var(--accent);
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            transition: var(--transition-smooth);
        }

        .main-content.expanded {
            margin-left: 0;
        }

        /* Premium Header */
        .header {
            height: var(--header-height);
            background: var(--glass-bg-light);
            border-bottom: 1px solid var(--glass-border);
            backdrop-filter: blur(var(--glass-blur));
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .toggle-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.25rem;
            padding: 0.5rem;
            border-radius: var(--border-radius-sm);
            transition: var(--transition-smooth);
        }

        .toggle-btn:hover {
            background: rgba(79, 140, 255, 0.1);
            color: var(--accent);
        }

        /* Hero Section */
        .hero {
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--text-primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .hero-cta {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Premium Buttons */
        .btn-premium {
            padding: 0.875rem 2rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition-bounce);
            position: relative;
            overflow: hidden;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
            color: white;
            box-shadow: 0 10px 25px rgba(79, 140, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(79, 140, 255, 0.4);
        }

        .btn-secondary {
            background: var(--glass-bg-light);
            color: var(--text-primary);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(var(--glass-blur));
        }

        .btn-secondary:hover {
            background: rgba(79, 140, 255, 0.1);
            border-color: var(--glass-border-bright);
            color: var(--accent);
            transform: translateY(-2px);
        }

        /* Premium Cards */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 2rem;
            text-align: center;
            transition: var(--transition-smooth);
            backdrop-filter: blur(var(--glass-blur));
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .feature-card:hover::before {
            transform: translateX(100%);
        }

        .feature-card:hover {
            transform: translateY(-8px);
            border-color: var(--glass-border-bright);
            box-shadow: 0 25px 50px rgba(79, 140, 255, 0.15);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            box-shadow: 0 10px 30px rgba(79, 140, 255, 0.3);
        }

        .feature-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .feature-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Year/Semester Cards */
        .year-sem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .year-sem-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 2rem 1.5rem;
            text-align: center;
            transition: var(--transition-smooth);
            backdrop-filter: blur(var(--glass-blur));
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .year-sem-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(79, 140, 255, 0.03), transparent);
            transform: rotate(45deg);
            transition: var(--transition-smooth);
        }

        .year-sem-card:hover::after {
            animation: shimmer 1.5s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .year-sem-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--glass-border-bright);
            box-shadow: 0 20px 40px rgba(79, 140, 255, 0.2);
        }

        .year-sem-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-tertiary));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.3);
        }

        .year-sem-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .year-sem-subtitle {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        /* Content Modal Styles */
        .content-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .content-modal-body {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            width: 95%;
            max-width: 1200px;
            height: 90vh;
            overflow: hidden;
            backdrop-filter: blur(var(--glass-blur));
            display: flex;
            flex-direction: column;
        }

        .content-modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--glass-bg-light);
        }

        .content-modal-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .content-sidebar {
            width: 300px;
            background: var(--glass-bg-light);
            border-right: 1px solid var(--glass-border);
            overflow-y: auto;
            padding: 1rem;
        }

        .content-main {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .chapter-item {
            padding: 0.75rem 1rem;
            margin: 0.25rem 0;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition-smooth);
            border: 1px solid transparent;
        }

        .chapter-item:hover {
            background: rgba(79, 140, 255, 0.1);
            border-color: var(--glass-border-bright);
        }

        .chapter-item.active {
            background: linear-gradient(135deg, rgba(79, 140, 255, 0.2), rgba(99, 102, 241, 0.15));
            border-color: var(--accent);
        }

        .chapter-content {
            display: none;
        }

        .chapter-content.active {
            display: block;
        }

        .pdf-viewer {
            width: 100%;
            height: 600px;
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-sm);
            background: var(--glass-bg-light);
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            margin: 1rem 0;
            border-radius: var(--border-radius-sm);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: var(--border-radius-sm);
        }

        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .resource-card {
            background: var(--glass-bg-light);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-sm);
            padding: 1rem;
            transition: var(--transition-smooth);
            cursor: pointer;
        }

        .resource-card:hover {
            border-color: var(--glass-border-bright);
            transform: translateY(-2px);
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.75rem;
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-badge.premium {
            background: rgba(168, 85, 247, 0.1);
            color: #a855f7;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        .search-container {
            position: relative;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            backdrop-filter: blur(var(--glass-blur));
            transition: var(--transition-smooth);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--glass-border-bright);
            box-shadow: 0 0 0 3px rgba(79, 140, 255, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .footer {
            background: var(--glass-bg);
            border-top: 1px solid var(--glass-border);
            padding: 2rem;
            text-align: center;
            color: var(--text-secondary);
            backdrop-filter: blur(var(--glass-blur));
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
                padding: 2rem 1rem;
            }

            .year-sem-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .header {
                padding: 0 1rem;
            }

            .content-modal-body {
                width: 98%;
                height: 95vh;
            }

            .content-modal-content {
                flex-direction: column;
            }

            .content-sidebar {
                width: 100%;
                max-height: 200px;
                border-right: none;
                border-bottom: 1px solid var(--glass-border);
            }
        }

        /* GSPA Mouse Cursor Effect */
        .cursor-follower {
            position: fixed;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.8;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(79, 140, 255, 0.4);
            transition: transform 0.1s ease;
            mix-blend-mode: screen;
        }

        .cursor-follower.hover {
            transform: scale(1.5);
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-tertiary));
            box-shadow: 0 0 30px rgba(6, 182, 212, 0.6);
        }

        .cursor-follower.click {
            transform: scale(0.8);
            background: linear-gradient(135deg, var(--accent-tertiary), var(--accent));
            box-shadow: 0 0 25px rgba(139, 92, 246, 0.5);
        }

        .cursor-dot {
            position: fixed;
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(79, 140, 255, 0.6);
            transition: all 0.05s ease;
        }

        .cursor-dot.hover {
            transform: scale(1.5);
            background: var(--accent-secondary);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.8);
        }

        .cursor-dot.click {
            transform: scale(0.5);
            background: var(--accent-tertiary);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.9);
        }

        /* Hide cursor on interactive elements */
        button:hover ~ .cursor-follower,
        a:hover ~ .cursor-follower,
        .year-sem-card:hover ~ .cursor-follower,
        .feature-card:hover ~ .cursor-follower,
        .chapter-item:hover ~ .cursor-follower {
            opacity: 0.3;
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .floating-orb {
                animation: none;
            }

            .cursor-follower,
            .cursor-dot {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-effects">
        <div class="floating-orb"></div>
        <div class="floating-orb"></div>
        <div class="floating-orb"></div>
    </div>

    <!-- GSPA Mouse Cursor Effect -->
    <div class="cursor-follower"></div>
    <div class="cursor-dot"></div>

    <div class="app-shell">
        <!-- Premium Sidebar -->
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">KN</div>
                <div class="sidebar-title">KEC Notes</div>
            </div>
            
            <div id="sidebar-nav">
                <!-- Navigation will be populated by JavaScript -->
            </div>
            
            <div style="margin-top: auto; padding: 1rem; border-top: 1px solid var(--glass-border);">
                <div class="status-badge premium">
                    <div class="status-dot"></div>
                    Premium Experience
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div id="main-content" class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button id="sidebar-toggle" class="toggle-btn">
                        <i class="bi bi-list"></i>
                    </button>
                    <h1 style="font-size: 1.25rem; font-weight: 700; margin: 0;">Welcome to KEC Notes</h1>
                </div>
                <div class="header-right">
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Search subjects...">
                        <i class="bi bi-search search-icon"></i>
                    </div>
                </div>
            </header>

            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">Elevate Your Engineering Journey</h1>
                    <p class="hero-subtitle">Access premium notes, interactive content, and comprehensive study materials designed for modern engineering students.</p>
                    <div class="hero-cta">
                        <a href="#subjects" class="btn-premium btn-primary">
                            <i class="bi bi-rocket-takeoff me-2"></i>Explore Subjects
                        </a>
                        <a href="#features" class="btn-premium btn-secondary">
                            <i class="bi bi-stars me-2"></i>Premium Features
                        </a>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section id="features" class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-lightning-charge"></i>
                    </div>
                    <h3 class="feature-title">Interactive Learning</h3>
                    <p class="feature-description">Engage with dynamic content, video lectures, and interactive simulations that make complex concepts easy to understand.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-cloud-download"></i>
                    </div>
                    <h3 class="feature-title">Offline Access</h3>
                    <p class="feature-description">Download notes and materials for offline study. Never worry about connectivity issues during your study sessions.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <h3 class="feature-title">Expert Teachers</h3>
                    <p class="feature-description">Content created and reviewed by experienced faculty members from KEC's top engineering departments.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <h3 class="feature-title">Progress Tracking</h3>
                    <p class="feature-description">Monitor your learning progress with detailed analytics and personalized study recommendations.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h3 class="feature-title">Quality Assured</h3>
                    <p class="feature-description">All materials are thoroughly reviewed and updated regularly to ensure accuracy and relevance.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-phone"></i>
                    </div>
                    <h3 class="feature-title">Mobile Optimized</h3>
                    <p class="feature-description">Seamless experience across all devices. Study anywhere, anytime with our responsive design.</p>
                </div>
            </section>

            <!-- Year/Semester Grid -->
            <section id="subjects">
                <div style="text-align: center; padding: 2rem; margin-bottom: 2rem;">
                    <h2 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem; background: linear-gradient(135deg, var(--text-primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Choose Your Academic Path</h2>
                    <p style="font-size: 1.125rem; color: var(--text-secondary);">Select your year and semester to access curated study materials</p>
                </div>
                <div id="year-sem-grid" class="year-sem-grid">
                    <!-- Year/Semester cards will be populated by JavaScript -->
                </div>
            </section>

            <!-- Footer -->
            <footer class="footer">
                <p>&copy; 2024 KEC Notes Premium. Crafted with ❤️ for engineering excellence.</p>
                <p style="margin-top: 0.5rem; font-size: 0.875rem;">Empowering the next generation of engineers</p>
            </footer>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Enhanced Notes Data with Chapter Structure and Google Drive Integration
        const notesData = {
            "Year 1": {
                "Semester 1": [
                    {
                        name: "Engineering Physics",
                        code: "PH 401",
                        teachers: ["Maha Datta Paudel", "Santosh Rawal", "Dr. Baburam Tiwari"],
                        credits: 3,
                        status: "complete",
                        syllabus: {
                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms", // Example Drive ID
                            title: "Engineering Physics Syllabus"
                        },
                        chapters: [
                            {
                                title: "Chapter 1: Mechanics",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Mechanics Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Introduction to Mechanics",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "15:30"
                                        },
                                        {
                                            title: "Newton's Laws",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "20:45"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "Problem Set 1",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 2: Waves and Oscillations",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Waves and Oscillations Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Simple Harmonic Motion",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "18:20"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 3: Thermodynamics",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Thermodynamics Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Laws of Thermodynamics",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "25:15"
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        name: "Engineering Mathematics I",
                        code: "MT 401",
                        teachers: ["Deepak Dash G", "Grishma Acharya"],
                        credits: 3,
                        status: "complete",
                        syllabus: {
                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                            title: "Engineering Mathematics I Syllabus"
                        },
                        chapters: [
                            {
                                title: "Chapter 1: Differential Calculus",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Differential Calculus Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Limits and Derivatives",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "22:30"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 2: Integral Calculus",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Integral Calculus Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Integration Techniques",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "28:45"
                                        }
                                    ]
                                }
                            }
                        ]
                    }
                ]
            },
            "Year 2": {
                "Semester 4": [
                    {
                        name: "Instrumentation",
                        code: "EE 502",
                        teachers: ["Saroj Thapa"],
                        credits: 3,
                        status: "premium",
                        syllabus: {
                            driveId: "17TcWvu5riOjBSm4mR14INsi55kgjYHco",
                            title: "Instrumentation Syllabus"
                        },
                        chapters: [
                            {
                                title: "Chapter 1: Introduction",
                                content: {
                                    notes: {
                                        driveId: "1e_bDTr0MCzZlmq-pkzywLXpaZk4lbSlV",
                                        title: "Measurement Systems Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Introduction to Instrumentation",
                                            youtubeId: "w88665IGlrs",
                                            duration: "16:20"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 2: Theory of Measurement",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Transducers Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Types of Transducers",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "19:45"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 3: Transducers",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Transducers Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Amplifiers and Filters",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "23:10"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 4: Interfacing of Instrumentation Systems",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Digital Instruments Notes"
                                    },
                                    videos: [
                                        {
                                            title: "ADC and DAC",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "21:30"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 5: Connectivity Technology in Instrumentation",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Digital Instruments Notes"
                                    },
                                    videos: [
                                        {
                                            title: "ADC and DAC",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "21:30"
                                        }
                                    ]
                                }
                            }
                            ,
                            {
                                title: "Chapter 6: Circuit Design",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Digital Instruments Notes"
                                    },
                                    videos: [
                                        {
                                            title: "ADC and DAC",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "21:30"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 7: Software for Instrumentation application",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Digital Instruments Notes"
                                    },
                                    videos: [
                                        {
                                            title: "ADC and DAC",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "21:30"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 8: Electrical Equipment",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Digital Instruments Notes"
                                    },
                                    videos: [
                                        {
                                            title: "ADC and DAC",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "21:30"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 9: Latest Trends in Instrumentation",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Digital Instruments Notes"
                                    },
                                    videos: [
                                        {
                                            title: "ADC and DAC",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "21:30"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 10: Application of Modern Instrumentation System",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Digital Instruments Notes"
                                    },
                                    videos: [
                                        {
                                            title: "ADC and DAC",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "21:30"
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        name: "Operating System",
                        code: "CS 502",
                        teachers: ["Dr. Ram Kumar", "Anita Sharma", "Prakash Singh"],
                        credits: 4,
                        status: "complete",
                        syllabus: {
                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                            title: "Operating System Syllabus"
                        },
                        chapters: [
                            {
                                title: "Chapter 1: Introduction to Operating Systems",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "OS Introduction Notes"
                                    },
                                    videos: [
                                        {
                                            title: "What is an Operating System?",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "18:30"
                                        },
                                        {
                                            title: "Types of Operating Systems",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "22:15"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "OS Basics Assignment",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 2: Process Management",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Process Management Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Process States and Lifecycle",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "25:40"
                                        },
                                        {
                                            title: "Process Scheduling Algorithms",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "31:20"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "Process Scheduling Problems",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 3: Memory Management",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Memory Management Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Memory Allocation Strategies",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "28:15"
                                        },
                                        {
                                            title: "Virtual Memory and Paging",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "35:50"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "Memory Management Lab",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 4: File Systems",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "File Systems Notes"
                                    },
                                    videos: [
                                        {
                                            title: "File System Structure",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "26:30"
                                        },
                                        {
                                            title: "Directory Implementation",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "24:45"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "File System Design Project",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 5: Device Management",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Device Management Notes"
                                    },
                                    videos: [
                                        {
                                            title: "I/O Systems and Device Drivers",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "29:20"
                                        },
                                        {
                                            title: "Device Allocation and Scheduling",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "27:10"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "Device Driver Assignment",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 6: Security and Protection",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Security and Protection Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Access Control Mechanisms",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "32:45"
                                        },
                                        {
                                            title: "Authentication and Authorization",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "28:30"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "Security Implementation Lab",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 7: Distributed Operating Systems",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Distributed OS Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Distributed System Architecture",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "34:20"
                                        },
                                        {
                                            title: "Network Protocols and Communication",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "30:15"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "Distributed System Project",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            },
                            {
                                title: "Chapter 8: Real-time Operating Systems",
                                content: {
                                    notes: {
                                        driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
                                        title: "Real-time OS Notes"
                                    },
                                    videos: [
                                        {
                                            title: "Real-time Scheduling",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "33:40"
                                        },
                                        {
                                            title: "Deadline Management",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "26:25"
                                        }
                                    ],
                                    assignments: [
                                        {
                                            title: "Real-time System Design",
                                            driveId: "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        name: "Data Communication",
                        code: "CS 502",
                        teachers: ["Gopal Karn"],
                        credits: 4,
                        status: "complete",
                        syllabus: {
                            driveId: "1Ujvd18cpXZ4LIhEvVddqMCcj3Zb0uwZc",
                            title: "Operating System Syllabus",
                        },
                        microSyllabus: {
                            driveId: "1_9fr0tk8DHHJSGCebsXZV5OS_Bnk4Ti3",
                            title: "Micro Syllabus"
                        },
                        chapters: [
                            {
                                title: "Chapter 1: Introduction to Data Communication",
                                content: {
                                    notes: {
                                        driveId: "1JFCBvCBmTdtaXLl6o69SgrUi6dvx2mMn",
                                        title: "DC Introduction Notes"
                                    },
                                    videos: [
                                        {
                                            title: "What is an Data Communication?",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "18:30"
                                        },
                                        {
                                            title: "Types of communication",
                                            youtubeId: "dQw4w9WgXcQ",
                                            duration: "22:15"
                                        }
                                    ],
                                }
                            },
                            {
                                title: "Chapter 2: Data communication fundamentals",
                                content: {
                                    notes: {
                                        driveId: "1DjaU_Rh_Sivso192nnfEY1fR4M65fiYQ",
                                        title: "DC fundamentals Notes"
                                    }
                                }
                            },
                            {
                                title: "Chapter 3: Transmission media & Data compression",
                                content: {
                                    notes: {
                                        driveId: "13zIIiqgZ9mt-_h5TSt6Kci9cJ-4zbcnL",
                                        title: "transmission media"
                                    }
                                }
                            },
                            {
                                title: "Chapter 4: Signal encoding techniques",
                                content: {
                                    notes: {
                                        driveId: "1K8_5B0C-WyrimfBXUFOMET3EkwLzbXFu",
                                        title: "signal encoding"
                                    }
                                }
                            },
                            {
                                title: "Chapter 5: Multiplexing & Switching",
                                content: {
                                    notes: {
                                        driveId: "1pK4aYANIrbv3mAwHbeWLlK9OXF24-fnk",
                                        title: "multiplexing & switching"
                                    }
                                }
                            },
                            {
                                title: "Chapter 6: Cellular Wireless Communication and latest trends",
                                content: {
                                    notes: {
                                        driveId: "159Z1z6HmxUQGSU4_WnzOoz-BtIWk-p1c",
                                        title: "cellular wireless"
                                    }
                                }
                            }
                        ]
                    }
                ]
            }
        };

        // Helper Functions
        function getSubjectIcon(subjectName) {
            const iconMap = {
                "Engineering Physics": "atom",
                "Engineering Mathematics": "calculator",
                "Engineering Mathematics I": "calculator",
                "Engineering Mathematics II": "calculator-fill",
                "Instrumentation": "speedometer2",
                "Operating System": "cpu",
                "Data Structures & Algorithms": "diagram-3-fill",
                "Data Communication": "wifi",
                "Electromagnetics": "magnet",
                "Numerical Methods": "calculator-fill"
            };
            return iconMap[subjectName] || "book";
        }

        function getStatusColor(status) {
            const statusColors = {
                "complete": "#22c55e",
                "upcoming": "#f59e0b", 
                "premium": "#a855f7",
                "new": "#06b6d4"
            };
            return statusColors[status] || "#64748b";
        }

        function getStatusText(status) {
            const statusTexts = {
                "complete": "Available",
                "upcoming": "Coming Soon",
                "premium": "Premium",
                "new": "New"
            };
            return statusTexts[status] || "Unknown";
        }

        // Google Drive PDF Embedding with Simplified Loading
        function embedGoogleDrivePDF(driveId, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            // Validate Drive ID format
            if (!driveId || typeof driveId !== 'string' || driveId.trim() === '') {
                container.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm); color: var(--text-secondary);">
                        <i class="bi bi-exclamation-triangle" style="font-size: 2rem; margin-right: 1rem;"></i>
                        <span>Invalid Drive ID provided</span>
                    </div>
                `;
                return;
            }

            // Check if it's the example Drive ID
            if (driveId === "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms") {
                container.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm); color: var(--text-secondary);">
                        <i class="bi bi-info-circle" style="font-size: 2rem; margin-right: 1rem;"></i>
                        <div style="text-align: center;">
                            <div style="margin-bottom: 1rem;">Example Drive ID detected</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);">Please replace with actual Google Drive file IDs</div>
                            <div style="margin-top: 1rem;">
                                <a href="https://drive.google.com" target="_blank" style="color: var(--accent); text-decoration: none;">
                                    <i class="bi bi-google-drive"></i> Open Google Drive
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                return;
            }

            // Quick loading state (reduced delay)
            container.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm);">
                    <div class="loading-spinner" style="margin-bottom: 1rem;"></div>
                    <div style="color: var(--text-secondary); text-align: center;">
                        <div style="margin-bottom: 0.5rem;">Loading PDF...</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Please wait</div>
                    </div>
                </div>
            `;

            // Short timeout (2 seconds) then show PDF ready option
            setTimeout(() => {
                container.innerHTML = `
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm);">
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <i class="bi bi-file-earmark-pdf" style="font-size: 3rem; color: var(--accent); margin-bottom: 1rem;"></i>
                            <div style="color: var(--text-primary); font-weight: 600; margin-bottom: 0.5rem;">PDF Ready to View</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Click below to open in Google Drive</div>
                        </div>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                            <button onclick="window.open('https://drive.google.com/file/d/${driveId}/view', '_blank')" 
                                    style="background: var(--accent); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: var(--border-radius-sm); cursor: pointer; font-weight: 600;">
                                <i class="bi bi-eye"></i> View in Google Drive
                            </button>
                            <button onclick="window.open('https://drive.google.com/file/d/${driveId}/download', '_blank')" 
                                    style="background: var(--accent-secondary); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: var(--border-radius-sm); cursor: pointer; font-weight: 600;">
                                <i class="bi bi-download"></i> Download PDF
                            </button>
                        </div>
                    </div>
                `;
            }, 2000); // Reduced from 8 seconds to 2 seconds
        }

        // Helper function to show Drive errors
        function showDriveError(container, message) {
            container.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm); color: var(--text-secondary);">
                    <i class="bi bi-exclamation-triangle" style="font-size: 2rem; margin-right: 1rem;"></i>
                    <div style="text-align: center;">
                        <div style="margin-bottom: 1rem;">${message}</div>
                        <div style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">
                            Common issues:<br>
                            • File not found or deleted<br>
                            • File permissions not set to "Anyone with link can view"<br>
                            • Invalid Drive ID format
                        </div>
                        <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 1rem;">
                            <i class="bi bi-lightbulb"></i> Tip: Right-click on your Google Drive file → Share → Change to "Anyone with the link"
                        </div>
                        <div style="margin-top: 1rem;">
                            <button onclick="testDriveLink('${container.id}')" style="background: var(--accent); color: white; border: none; padding: 0.5rem 1rem; border-radius: var(--border-radius-sm); cursor: pointer; font-size: 0.9rem;">
                                <i class="bi bi-bug"></i> Test Drive Link
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to test Drive links
        function testDriveLink(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            // Get the Drive ID from the container's data attribute or try to extract it
            const driveId = prompt("Enter a Google Drive file ID to test:");
            if (!driveId) return;

            // Test the link
            container.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm); color: var(--text-secondary);">
                    <div style="text-align: center;">
                        <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                        <div>Testing Drive ID: ${driveId}</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
                            Opening in new tab to test...
                        </div>
                    </div>
                </div>
            `;

            // Open the link in a new tab to test
            const testUrl = `https://drive.google.com/file/d/${driveId}/view`;
            window.open(testUrl, '_blank');

            // Try to embed it
            setTimeout(() => {
                embedGoogleDrivePDF(driveId, containerId);
            }, 2000);
        }

        // Function to retry embedding
        function tryEmbedAgain(driveId, containerId) {
            console.log('🔄 Retrying embed for:', driveId);
            embedGoogleDrivePDF(driveId, containerId);
        }

        // Debug function to log Drive issues
        function debugDrivePreview(driveId, containerId) {
            console.log('🔍 Debugging Drive Preview:', {
                driveId: driveId,
                containerId: containerId,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                url: window.location.href
            });

            // Test if the Drive ID format is valid
            const driveIdPattern = /^[a-zA-Z0-9_-]{25,}$/;
            const isValidFormat = driveIdPattern.test(driveId);
            console.log('✅ Drive ID Format Valid:', isValidFormat);

            // Test the preview URL
            const previewUrl = `https://drive.google.com/file/d/${driveId}/preview`;
            console.log('🔗 Preview URL:', previewUrl);

            // Test the view URL
            const viewUrl = `https://drive.google.com/file/d/${driveId}/view`;
            console.log('👁️ View URL:', viewUrl);

            return {
                isValidFormat,
                previewUrl,
                viewUrl
            };
        }

        // Function to handle large files with better user experience
        function handleLargeFile(driveId, containerId, estimatedSize = 'unknown') {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm);">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <i class="bi bi-file-earmark-pdf" style="font-size: 3rem; color: var(--accent-secondary); margin-bottom: 1rem;"></i>
                        <div style="color: var(--text-primary); font-weight: 600; margin-bottom: 0.5rem;">Large File Detected</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                            Estimated size: ${estimatedSize}<br>
                            Large files may take longer to load in preview
                        </div>
                    </div>
                    <div style="display: grid; gap: 1rem; width: 100%; max-width: 400px;">
                        <button onclick="window.open('https://drive.google.com/file/d/${driveId}/view', '_blank')" 
                                style="background: var(--accent); color: white; border: none; padding: 0.75rem; border-radius: var(--border-radius-sm); cursor: pointer; font-weight: 600;">
                            <i class="bi bi-eye"></i> View in Google Drive (Recommended)
                        </button>
                        <button onclick="window.open('https://drive.google.com/file/d/${driveId}/download', '_blank')" 
                                style="background: var(--accent-secondary); color: white; border: none; padding: 0.75rem; border-radius: var(--border-radius-sm); cursor: pointer; font-weight: 600;">
                            <i class="bi bi-download"></i> Download for Offline Viewing
                        </button>
                        <button onclick="tryEmbedLargeFile('${driveId}', '${containerId}')" 
                                style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); padding: 0.75rem; border-radius: var(--border-radius-sm); cursor: pointer;">
                            <i class="bi bi-hourglass-split"></i> Try Preview Anyway
                        </button>
                    </div>
                </div>
            `;
        }

        // Function to try embedding large files with extended timeout
        function tryEmbedLargeFile(driveId, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 300px; background: var(--glass-bg-light); border-radius: var(--border-radius-sm);">
                    <div class="loading-spinner" style="margin-bottom: 1rem;"></div>
                    <div style="color: var(--text-secondary); text-align: center;">
                        <div style="margin-bottom: 0.5rem;">Loading Large File...</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">This may take several minutes</div>
                        <div style="margin-top: 1rem;">
                            <button onclick="cancelLargeFileLoad('${containerId}')" 
                                    style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); padding: 0.5rem 1rem; border-radius: var(--border-radius-sm); cursor: pointer; font-size: 0.8rem;">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // Extended timeout for large files (5 minutes)
            const largeFileTimeout = setTimeout(() => {
                if (container.querySelector('.loading-spinner')) {
                    handleLargeFile(driveId, containerId, 'Very Large (>10MB)');
                }
            }, 300000);

            // Try to embed with extended timeout
            const iframe = document.createElement('iframe');
            iframe.src = `https://drive.google.com/file/d/${driveId.trim()}/preview`;
            iframe.className = 'pdf-viewer';
            iframe.allow = 'autoplay';
            iframe.style.border = 'none';
            
            iframe.onload = function() {
                clearTimeout(largeFileTimeout);
                setTimeout(() => {
                    container.innerHTML = '';
                    container.appendChild(iframe);
                }, 2000);
            };

            iframe.onerror = function() {
                clearTimeout(largeFileTimeout);
                handleLargeFile(driveId, containerId, 'Error Loading');
            };
        }

        // Function to cancel large file loading
        function cancelLargeFileLoad(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            handleLargeFile(container.dataset.driveId || 'unknown', containerId, 'Loading Cancelled');
        }

        // YouTube Video Embedding
        function embedYouTubeVideo(videoId, containerId, title) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const videoWrapper = document.createElement('div');
            videoWrapper.innerHTML = `
                <h4 style="margin-bottom: 1rem; color: var(--text-primary);">${title}</h4>
                <div class="video-container">
                    <iframe 
                        src="https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1"
                        title="${title}"
                        allowfullscreen>
                    </iframe>
                </div>
            `;
            
            container.appendChild(videoWrapper);
        }

        // Show Subject Content Modal
        function showSubjectContent(subject) {
            const modal = document.createElement('div');
            modal.className = 'content-modal';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            };

            modal.innerHTML = `
                <div class="content-modal-body">
                    <div class="content-modal-header">
                        <div>
                            <h2 style="margin: 0; color: var(--text-primary); font-size: 1.75rem; font-weight: 700;">
                                ${subject.name}
                            </h2>
                            <p style="margin: 0.5rem 0 0; color: var(--text-secondary);">
                                ${subject.code} • ${subject.credits} Credits • ${subject.teachers.join(', ')}
                            </p>
                        </div>
                        <button onclick="this.closest('.content-modal').remove()" 
                                style="background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer; padding: 0.5rem;">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                    
                    <div class="content-modal-content">
                        <div class="content-sidebar">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--text-primary); margin-bottom: 1rem;">📚 Course Content</h4>
                                
                                <div class="chapter-item active" onclick="showSyllabus('${subject.name}')">
                                    <i class="bi bi-list-ul" style="margin-right: 0.5rem;"></i>
                                    <strong>Syllabus</strong>
                                </div>
                                
                                ${subject.chapters.map((chapter, index) => `
                                    <div class="chapter-item" onclick="showChapter('${subject.name}', ${index})">
                                        <i class="bi bi-book" style="margin-right: 0.5rem;"></i>
                                        ${chapter.title}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="content-main">
                            <div id="content-display">
                                <!-- Content will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            showSyllabus(subject.name); // Show syllabus by default
        }

        // Show Syllabus
        function showSyllabus(subjectName) {
            const subject = findSubject(subjectName);
            if (!subject) return;

            // Update active state
            document.querySelectorAll('.chapter-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector('.chapter-item').classList.add('active');

            const contentDisplay = document.getElementById('content-display');
            contentDisplay.innerHTML = `
                <div class="chapter-content active">
                    <h3 style="color: var(--text-primary); margin-bottom: 1.5rem;">📋 Course Syllabus</h3>
                    <div id="syllabus-pdf-container"></div>
                    
                    <div style="margin-top: 2rem;">
                        <h4 style="color: var(--text-primary); margin-bottom: 1rem;">📖 Course Overview</h4>
                        <div style="background: var(--glass-bg-light); border-radius: var(--border-radius-sm); padding: 1.5rem; border: 1px solid var(--glass-border);">
                            <p style="color: var(--text-secondary); line-height: 1.6; margin: 0;">
                                This course covers comprehensive topics in ${subject.name}. 
                                The curriculum is designed to provide both theoretical understanding and practical applications.
                                Students will engage with ${subject.chapters.length} main chapters covering essential concepts and methodologies.
                            </p>
                        </div>
                    </div>
                    <div style="margin-top: 2rem;">
                        <h4 style="color: var(--text-primary); margin-bottom: 1rem;">Micro Syllabus</h4>
                        <div id="micro-syllabus-pdf-container"></div>
                    
                        <div style="margin-top: 2rem;">
                    </div>
                    

                    <div class="resource-grid" style="margin-top: 2rem;">
                        <div class="resource-card">
                            <h5 style="color: var(--text-primary); margin-bottom: 0.5rem;">
                                <i class="bi bi-book-fill" style="margin-right: 0.5rem; color: var(--accent);"></i>
                                Chapters
                            </h5>
                            <p style="color: var(--text-secondary); margin: 0;">${subject.chapters.length} chapters</p>
                        </div>
                        
                        <div class="resource-card">
                            <h5 style="color: var(--text-primary); margin-bottom: 0.5rem;">
                                <i class="bi bi-play-circle-fill" style="margin-right: 0.5rem; color: var(--accent-secondary);"></i>
                                Videos
                            </h5>
                            <p style="color: var(--text-secondary); margin: 0;">
                                ${subject.chapters.reduce((total, chapter) => total + (chapter.content.videos?.length || 0), 0)} video lectures
                            </p>
                        </div>
                        
                        <div class="resource-card">
                            <h5 style="color: var(--text-primary); margin-bottom: 0.5rem;">
                                <i class="bi bi-person-fill" style="margin-right: 0.5rem; color: var(--accent-tertiary);"></i>
                                Instructors
                            </h5>
                            <p style="color: var(--text-secondary); margin: 0;">${subject.teachers.length} expert teachers</p>
                        </div>
                    </div>
                </div>
            `;

            // Load syllabus PDF
            if (subject.syllabus && subject.syllabus.driveId) {
                embedGoogleDrivePDF(subject.syllabus.driveId, 'syllabus-pdf-container');
            }
            if (subject.microSyllabus && subject.microSyllabus.driveId) {
                embedGoogleDrivePDF(subject.microSyllabus.driveId, 'micro-syllabus-pdf-container');
            }
        }

        // Show Chapter Content
        function showChapter(subjectName, chapterIndex) {
            const subject = findSubject(subjectName);
            if (!subject || !subject.chapters[chapterIndex]) return;

            const chapter = subject.chapters[chapterIndex];

            // Update active state
            document.querySelectorAll('.chapter-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.chapter-item')[chapterIndex + 1].classList.add('active');

            const contentDisplay = document.getElementById('content-display');
            contentDisplay.innerHTML = `
                <div class="chapter-content active">
                    <h3 style="color: var(--text-primary); margin-bottom: 1.5rem;">
                        📚 ${chapter.title}
                    </h3>
                    
                    <!-- Chapter Notes -->
                    <div style="margin-bottom: 2rem;">
                        <h4 style="color: var(--text-primary); margin-bottom: 1rem;">
                            <i class="bi bi-file-text" style="margin-right: 0.5rem; color: var(--accent);"></i>
                            Chapter Notes
                        </h4>
                        <div id="chapter-notes-${chapterIndex}"></div>
                    </div>
                    
                    <!-- Chapter Videos -->
                    ${chapter.content.videos && chapter.content.videos.length > 0 ? `
                        <div style="margin-bottom: 2rem;">
                            <h4 style="color: var(--text-primary); margin-bottom: 1rem;">
                                <i class="bi bi-play-circle" style="margin-right: 0.5rem; color: var(--accent-secondary);"></i>
                                Video Lectures
                            </h4>
                            <div id="chapter-videos-${chapterIndex}"></div>
                        </div>
                    ` : ''}
                    
                    <!-- Assignments -->
                    ${chapter.content.assignments && chapter.content.assignments.length > 0 ? `
                        <div style="margin-bottom: 2rem;">
                            <h4 style="color: var(--text-primary); margin-bottom: 1rem;">
                                <i class="bi bi-clipboard-check" style="margin-right: 0.5rem; color: var(--accent-tertiary);"></i>
                                Assignments & Practice
                            </h4>
                            <div class="resource-grid">
                                ${chapter.content.assignments.map(assignment => `
                                    <div class="resource-card" onclick="openDriveFile('${assignment.driveId}')">
                                        <h5 style="color: var(--text-primary); margin-bottom: 0.5rem;">
                                            <i class="bi bi-file-earmark-text" style="margin-right: 0.5rem;"></i>
                                            ${assignment.title}
                                        </h5>
                                        <p style="color: var(--text-secondary); margin: 0; font-size: 0.875rem;">Click to open</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;

            // Load chapter notes PDF
            if (chapter.content.notes && chapter.content.notes.driveId) {
                embedGoogleDrivePDF(chapter.content.notes.driveId, `chapter-notes-${chapterIndex}`);
            }

            // Load chapter videos
            if (chapter.content.videos && chapter.content.videos.length > 0) {
                const videosContainer = document.getElementById(`chapter-videos-${chapterIndex}`);
                chapter.content.videos.forEach((video, videoIndex) => {
                    const videoDiv = document.createElement('div');
                    videoDiv.id = `video-${chapterIndex}-${videoIndex}`;
                    videoDiv.style.marginBottom = '1.5rem';
                    videosContainer.appendChild(videoDiv);
                    embedYouTubeVideo(video.youtubeId, `video-${chapterIndex}-${videoIndex}`, video.title);
                });
            }
        }

        // Find subject by name
        function findSubject(subjectName) {
            for (const year in notesData) {
                for (const semester in notesData[year]) {
                    const subject = notesData[year][semester].find(s => s.name === subjectName);
                    if (subject) return subject;
                }
            }
            return null;
        }

        // Open Google Drive file in new tab
        function openDriveFile(driveId) {
            window.open(`https://drive.google.com/file/d/${driveId}/view`, '_blank');
        }

        // Initialize App
        function initializeApp() {
            renderSidebarNav();
            renderYearSemGrid();
            setupEventListeners();
        }

        // Render Sidebar Navigation
        function renderSidebarNav() {
            const sidebarNav = document.getElementById('sidebar-nav');
            if (!sidebarNav) return;

            let navHTML = '';
            
            Object.entries(notesData).forEach(([year, semesters]) => {
                navHTML += `
                    <div class="nav-section">
                        <div class="nav-label">
                            <i class="bi bi-mortarboard"></i>
                            ${year}
                        </div>
                `;
                
                Object.entries(semesters).forEach(([semester, subjects]) => {
                    const subjectCount = subjects.length;
                    const completedCount = subjects.filter(s => s.status === 'complete').length;
                    
                    navHTML += `
                        <a href="#" class="nav-link" onclick="navigateToSemester('${year}', '${semester}')">
                            <i class="bi bi-book"></i>
                            <span>${semester}</span>
                            <div style="margin-left: auto; display: flex; align-items: center; gap: 0.5rem;">
                                <span style="font-size: 0.75rem; color: var(--text-muted);">${completedCount}/${subjectCount}</span>
                                <div style="width: 6px; height: 6px; border-radius: 50%; background: ${completedCount === subjectCount ? '#22c55e' : '#f59e0b'};"></div>
                            </div>
                        </a>
                    `;
                });
                
                navHTML += `</div>`;
            });

            sidebarNav.innerHTML = navHTML;
        }

        // Render Year/Semester Grid
        function renderYearSemGrid() {
            const grid = document.getElementById('year-sem-grid');
            if (!grid) return;

            let gridHTML = '';
            
            Object.entries(notesData).forEach(([year, semesters]) => {
                Object.entries(semesters).forEach(([semester, subjects]) => {
                    const subjectCount = subjects.length;
                    const completedCount = subjects.filter(s => s.status === 'complete').length;
                    const premiumCount = subjects.filter(s => s.status === 'premium').length;
                    
                    gridHTML += `
                        <div class="year-sem-card" onclick="navigateToSemester('${year}', '${semester}')">
                            <div class="year-sem-icon">
                                <i class="bi bi-layers"></i>
                            </div>
                            <div class="year-sem-title">${year}</div>
                            <div class="year-sem-subtitle">${semester}</div>
                            
                            <div style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
                                <div class="status-badge" style="font-size: 0.75rem;">
                                    <div class="status-dot"></div>
                                    ${subjectCount} Subjects
                                </div>
                                ${premiumCount > 0 ? `
                                    <div class="status-badge premium" style="font-size: 0.75rem;">
                                        <div class="status-dot"></div>
                                        ${premiumCount} Premium
                                    </div>
                                ` : ''}
                            </div>
                            
                            <div style="width: 100%; background: rgba(79, 140, 255, 0.1); border-radius: 10px; height: 6px; margin-bottom: 1rem;">
                                <div style="background: linear-gradient(90deg, var(--accent), var(--accent-secondary)); height: 100%; border-radius: 10px; width: ${(completedCount / subjectCount) * 100}%; transition: width 0.8s ease;"></div>
                            </div>
                            
                            <div class="btn-premium btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem; width: 100%;">
                                <i class="bi bi-arrow-right me-2"></i>Explore Subjects
                            </div>
                        </div>
                    `;
                });
            });

            grid.innerHTML = gridHTML;
        }

        // Navigation Function
        function navigateToSemester(year, semester) {
            showSemesterDetail(year, semester);
        }

        // Show Semester Detail Modal/Page
        function showSemesterDetail(year, semester) {
            const subjects = notesData[year]?.[semester] || [];
            
            const modal = document.createElement('div');
            modal.className = 'content-modal';
            modal.onclick = (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            };

            modal.innerHTML = `
                <div class="content-modal-body" style="height: auto; max-height: 90vh;">
                    <div class="content-modal-header">
                        <div>
                            <h2 style="margin: 0; color: var(--text-primary); font-size: 1.75rem; font-weight: 700;">${year} - ${semester}</h2>
                            <p style="margin: 0.5rem 0 0; color: var(--text-secondary);">${subjects.length} subjects available</p>
                        </div>
                        <button onclick="this.closest('.content-modal').remove()" style="background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer; padding: 0.5rem;">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                    
                    <div style="padding: 2rem; overflow-y: auto; flex: 1;">
                        <div style="display: grid; gap: 1.5rem;">
                            ${subjects.map(subject => {
                                const statusColor = getStatusColor(subject.status);
                                const statusText = getStatusText(subject.status);
                                
                                return `
                                    <div style="background: var(--glass-bg-light); border: 1px solid var(--glass-border); border-radius: var(--border-radius-sm); padding: 2rem; transition: var(--transition-smooth); cursor: pointer;" 
                                         onclick="showSubjectContent(${JSON.stringify(subject).replace(/"/g, '&quot;')})"
                                         onmouseover="this.style.borderColor='var(--glass-border-bright)'; this.style.transform='translateY(-2px)'" 
                                         onmouseout="this.style.borderColor='var(--glass-border)'; this.style.transform='translateY(0)'">
                                        
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.5rem;">
                                            <div style="display: flex; align-items: center; gap: 1rem;">
                                                <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--accent), var(--accent-secondary)); border-radius: 15px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                                    <i class="bi bi-${getSubjectIcon(subject.name)}"></i>
                                                </div>
                                                <div>
                                                    <h4 style="margin: 0; color: var(--text-primary); font-size: 1.25rem; font-weight: 700;">${subject.name}</h4>
                                                    <p style="margin: 0.5rem 0 0; color: var(--text-muted); font-size: 0.9rem;">${subject.code} • ${subject.credits} Credits</p>
                                                </div>
                                            </div>
                                            <div style="background: ${statusColor}20; color: ${statusColor}; padding: 0.375rem 0.875rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">
                                                ${statusText}
                                            </div>
                                        </div>
                                        
                                        <div style="margin-bottom: 1.5rem;">
                                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;"><strong>Instructors:</strong> ${subject.teachers.join(', ')}</p>
                                        </div>
                                        
                                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                                            <div style="text-align: center; padding: 0.75rem; background: rgba(79, 140, 255, 0.1); border-radius: var(--border-radius-sm);">
                                                <div style="color: var(--accent); font-size: 1.5rem; margin-bottom: 0.25rem;">
                                                    <i class="bi bi-book"></i>
                                                </div>
                                                <div style="color: var(--text-primary); font-weight: 600; font-size: 0.9rem;">${subject.chapters?.length || 0}</div>
                                                <div style="color: var(--text-secondary); font-size: 0.75rem;">Chapters</div>
                                            </div>
                                            
                                            <div style="text-align: center; padding: 0.75rem; background: rgba(6, 182, 212, 0.1); border-radius: var(--border-radius-sm);">
                                                <div style="color: var(--accent-secondary); font-size: 1.5rem; margin-bottom: 0.25rem;">
                                                    <i class="bi bi-play-circle"></i>
                                                </div>
                                                <div style="color: var(--text-primary); font-weight: 600; font-size: 0.9rem;">
                                                    ${subject.chapters?.reduce((total, chapter) => total + (chapter.content.videos?.length || 0), 0) || 0}
                                                </div>
                                                <div style="color: var(--text-secondary); font-size: 0.75rem;">Videos</div>
                                            </div>
                                            
                                            <div style="text-align: center; padding: 0.75rem; background: rgba(139, 92, 246, 0.1); border-radius: var(--border-radius-sm);">
                                                <div style="color: var(--accent-tertiary); font-size: 1.5rem; margin-bottom: 0.25rem;">
                                                    <i class="bi bi-clipboard-check"></i>
                                                </div>
                                                <div style="color: var(--text-primary); font-weight: 600; font-size: 0.9rem;">
                                                    ${subject.chapters?.reduce((total, chapter) => total + (chapter.content.assignments?.length || 0), 0) || 0}
                                                </div>
                                                <div style="color: var(--text-secondary); font-size: 0.75rem;">Assignments</div>
                                            </div>
                                        </div>
                                        
                                        <div style="display: flex; align-items: center; gap: 0.5rem; color: var(--accent); font-weight: 600;">
                                            <i class="bi bi-arrow-right-circle"></i>
                                            <span>Click to explore content</span>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        // Setup Event Listeners
        function setupEventListeners() {
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');

            sidebarToggle?.addEventListener('click', () => {
                sidebar.classList.toggle('collapsed');
                sidebar.classList.toggle('open');
                mainContent.classList.toggle('expanded');
            });

            // Search functionality
            const searchInput = document.querySelector('.search-input');
            searchInput?.addEventListener('input', handleSearch);

                // Smooth scrolling for anchor links
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        const href = this.getAttribute('href');
                        if (href && href.length > 1) {
                            e.preventDefault();
                            const target = document.querySelector(href);
                            target?.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });

            // Escape key to close modals
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const modal = document.querySelector('.content-modal');
                    if (modal) {
                        modal.remove();
                    }
                }
            });
        }

        // Search Handler
        function handleSearch(e) {
            const query = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.year-sem-card');
            
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(query) || query === '') {
                    card.style.display = '';
                    card.style.opacity = '1';
                } else {
                    card.style.opacity = '0.3';
                }
            });

            // Also search through subject names
            if (query) {
                const allSubjects = [];
                Object.values(notesData).forEach(yearData => {
                    Object.values(yearData).forEach(subjects => {
                        allSubjects.push(...subjects);
                    });
                });

                const matchingSubjects = allSubjects.filter(subject => 
                    subject.name.toLowerCase().includes(query) ||
                    subject.code.toLowerCase().includes(query) ||
                    subject.teachers.some(teacher => teacher.toLowerCase().includes(query))
                );

                // Could implement quick search results display here
            }
        }

        // Performance optimization
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // GSPA Mouse Cursor Effect
        function initCursorEffect() {
            const cursorFollower = document.querySelector('.cursor-follower');
            const cursorDot = document.querySelector('.cursor-dot');
            
            if (!cursorFollower || !cursorDot) return;

            let mouseX = 0;
            let mouseY = 0;
            let followerX = 0;
            let followerY = 0;
            let dotX = 0;
            let dotY = 0;

            // Mouse move event
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            // Mouse enter/leave events for interactive elements
            const interactiveElements = document.querySelectorAll('button, a, .year-sem-card, .feature-card, .chapter-item, .resource-card, .nav-link');
            
            interactiveElements.forEach(element => {
                element.addEventListener('mouseenter', () => {
                    cursorFollower.classList.add('hover');
                    cursorDot.classList.add('hover');
                });
                
                element.addEventListener('mouseleave', () => {
                    cursorFollower.classList.remove('hover');
                    cursorDot.classList.remove('hover');
                });
            });

            // Click events
            document.addEventListener('mousedown', () => {
                cursorFollower.classList.add('click');
                cursorDot.classList.add('click');
            });

            document.addEventListener('mouseup', () => {
                cursorFollower.classList.remove('click');
                cursorDot.classList.remove('click');
            });

            // Animation loop
            function animateCursor() {
                // Smooth following for the larger circle
                followerX += (mouseX - followerX) * 0.1;
                followerY += (mouseY - followerY) * 0.1;
                
                // Faster following for the dot
                dotX += (mouseX - dotX) * 0.3;
                dotY += (mouseY - dotY) * 0.3;

                // Apply transforms
                cursorFollower.style.transform = `translate(${followerX - 20}px, ${followerY - 20}px)`;
                cursorDot.style.transform = `translate(${dotX - 4}px, ${dotY - 4}px)`;

                requestAnimationFrame(animateCursor);
            }

            animateCursor();
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            initCursorEffect();
        });

        // Handle window resize
        window.addEventListener('resize', debounce(() => {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            
            if (window.innerWidth <= 768) {
                sidebar.classList.add('collapsed');
                mainContent.classList.add('expanded');
            }
        }, 250));
    </script>
</body>
</html>